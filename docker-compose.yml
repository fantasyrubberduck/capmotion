version: "3.9"

services:
  webcam:
    build: .
    container_name: motion_webcam
    devices:
      - "/dev/video0:/dev/video0"   # acc√©s a la webcam local
    volumes:
      - ./output/webcam:/app/output
    environment:
      - CAMERA_SOURCE=/dev/video0   # variable per indicar la font
    restart: unless-stopped

  ipcam:
    build: .
    container_name: motion_ipcam
    volumes:
      - ./output/ipcam:/app/output
    environment:
      - CAMERA_SOURCE=rtsp://user:password@192.168.1.50:554/stream
    restart: unless-stopped
